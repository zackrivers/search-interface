<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manifest</title>
    <style>
        /* Theme System */
        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --bg-tertiary: #374151;
            --bg-quaternary: #4b5563;
            --text-primary: #ffffff;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            --text-disabled: #6b7280;
            --border-primary: #374151;
            --border-secondary: #4b5563;
            --accent-blue: #3b82f6;
            --accent-blue-hover: #2563eb;
            --accent-green: #10b981;
            --accent-green-hover: #059669;
            --accent-red: #ef4444;
            --shadow-light: rgba(0, 0, 0, 0.3);
            --shadow-heavy: rgba(0, 0, 0, 0.5);
            --highlight-bg: rgba(59, 130, 246, 0.1);
            --highlight-border: rgba(59, 130, 246, 0.3);
            --theme-name: "Steel";
        }

        [data-theme="steel"] {
            /* Steel - Default Dark */
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --bg-tertiary: #374151;
            --bg-quaternary: #4b5563;
            --text-primary: #ffffff;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            --text-disabled: #6b7280;
            --border-primary: #374151;
            --border-secondary: #4b5563;
            --accent-blue: #3b82f6;
            --accent-blue-hover: #2563eb;
            --accent-green: #10b981;
            --accent-green-hover: #059669;
            --accent-red: #ef4444;
            --shadow-light: rgba(0, 0, 0, 0.3);
            --shadow-heavy: rgba(0, 0, 0, 0.5);
            --highlight-bg: rgba(59, 130, 246, 0.1);
            --highlight-border: rgba(59, 130, 246, 0.3);
            --theme-name: "Steel";
        }

        [data-theme="terracotta"] {
            /* Early 4x5 Work - Grayscale */
            --bg-primary: #0D0D0D;
            --bg-secondary: #262626;
            --bg-tertiary: #404040;
            --bg-quaternary: #737373;
            --text-primary: #A6A6A6;
            --text-secondary: #737373;
            --text-muted: #737373;
            --text-disabled: #404040;
            --border-primary: #262626;
            --border-secondary: #404040;
            --accent-blue: #737373;
            --accent-blue-hover: #A6A6A6;
            --accent-green: #A6A6A6;
            --accent-green-hover: #737373;
            --accent-red: #737373;
            --shadow-light: rgba(13, 13, 13, 0.25);
            --shadow-heavy: rgba(13, 13, 13, 0.4);
            --highlight-bg: rgba(115, 115, 115, 0.1);
            --highlight-border: rgba(115, 115, 115, 0.3);
            --theme-name: "Early 4x5";
        }

        [data-theme="vasilev"] {
            /* Vasilev - Architectural blues */
            --bg-primary: #0a2140;
            --bg-secondary: #1a3d59;
            --bg-tertiary: #255459;
            --bg-quaternary: #80a78f;
            --text-primary: #ffffff;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            --text-disabled: #6b7280;
            --border-primary: #255459;
            --border-secondary: #80a78f;
            --accent-blue: #80a78f;
            --accent-blue-hover: #255459;
            --accent-green: #80a78f;
            --accent-green-hover: #255459;
            --accent-red: #ef4444;
            --shadow-light: rgba(10, 33, 64, 0.3);
            --shadow-heavy: rgba(10, 33, 64, 0.5);
            --highlight-bg: rgba(128, 167, 143, 0.1);
            --highlight-border: rgba(128, 167, 143, 0.3);
            --theme-name: "Vasilev";
        }

        [data-theme="soliyev"] {
            /* Soliyev - Frontend Job Portal */
            --bg-primary: #101726;
            --bg-secondary: #1E2940;
            --bg-tertiary: #737373;
            --bg-quaternary: #F2F2F2;
            --text-primary: #F2F2F2;
            --text-secondary: #737373;
            --text-muted: #737373;
            --text-disabled: #1E2940;
            --border-primary: #1E2940;
            --border-secondary: #737373;
            --accent-blue: #737373;
            --accent-blue-hover: #F2F2F2;
            --accent-green: #F2F2F2;
            --accent-green-hover: #737373;
            --accent-red: #737373;
            --shadow-light: rgba(16, 23, 38, 0.3);
            --shadow-heavy: rgba(16, 23, 38, 0.5);
            --highlight-bg: rgba(115, 115, 115, 0.1);
            --highlight-border: rgba(115, 115, 115, 0.3);
            --theme-name: "Soliyev";
        }

        [data-theme="professional"] {
            /* Professional Blue theme */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-quaternary: #475569;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --text-disabled: #64748b;
            --border-primary: #334155;
            --border-secondary: #475569;
            --accent-blue: #0ea5e9;
            --accent-blue-hover: #0284c7;
            --accent-green: #06b6d4;
            --accent-green-hover: #0891b2;
            --accent-red: #ef4444;
            --shadow-light: rgba(0, 0, 0, 0.4);
            --shadow-heavy: rgba(0, 0, 0, 0.6);
            --highlight-bg: rgba(14, 165, 233, 0.1);
            --highlight-border: rgba(14, 165, 233, 0.3);
            --theme-name: "Professional";
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 2rem;
            background: var(--bg-primary);
            border-bottom: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 32px;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: absolute;
            left: 2rem;
        }

        .header-center {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: absolute;
            left: 200px;
        }

        .header h1 {
            font-size: 1.1rem;
            font-weight: 500;
            color: var(--text-primary);
            margin: 0;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            position: absolute;
            right: 2rem;
        }

        /* Header Dropdown System */
        .header-dropdown-container {
            position: relative;
        }

        .header-btn {
            padding: 0.25rem 0.75rem;
            background: transparent;
            border: 1px solid transparent;
            border-radius: 0.25rem;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .header-btn:hover:not(.signout-btn) {
            background: var(--bg-tertiary);
            border-color: var(--border-primary);
        }

        .signout-btn {
            border-color: var(--border-primary);
        }

        .signout-btn:hover {
            background: var(--accent-red);
            border-color: var(--accent-red);
        }

        .header-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px var(--shadow-heavy);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-top: 0.5rem;
            min-width: 280px;
            overflow: hidden;
        }

        .header-dropdown-container:hover .header-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-section {
            padding: 1rem;
            border-bottom: 1px solid var(--border-primary);
        }

        .dropdown-section:last-child {
            border-bottom: none;
        }

        .dropdown-section-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Search Dropdown Specific */
        .search-dropdown {
            min-width: 320px;
        }

        .search-dropdown .live-search-container {
            width: 100%;
        }

        /* Settings Dropdown Specific */
        .settings-dropdown {
            min-width: 320px;
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .settings-dropdown .theme-option {
            padding: 0.5rem;
            border-radius: 0.375rem;
            transition: background 0.15s;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: 1px solid transparent;
        }

        .settings-dropdown .theme-option:hover {
            background: var(--bg-tertiary);
            border-color: var(--border-secondary);
        }

        .settings-dropdown .theme-option.active {
            background: var(--bg-tertiary);
            border-color: var(--accent-blue);
        }

        .settings-dropdown .theme-name {
            font-size: 0.75rem;
            font-weight: 500;
        }

        .settings-dropdown .density-controls {
            justify-content: center;
        }

        .settings-action-btn {
            width: 100%;
            padding: 0.75rem 1rem;
            background: transparent;
            border: 1px solid var(--border-primary);
            border-radius: 0.375rem;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            margin-bottom: 0.5rem;
        }

        .settings-action-btn:last-child {
            margin-bottom: 0;
        }

        .settings-action-btn:hover {
            background: var(--bg-tertiary);
            border-color: var(--accent-blue);
            color: var(--text-primary);
        }

        /* Support Dropdown Specific */
        .support-dropdown {
            min-width: 200px;
        }


        /* Unified Container - Single scrollable content area */
        .unified-container {
            min-height: 100vh;
            padding: 2rem;
            padding-top: calc(32px + 4rem);
            padding-bottom: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        .manifest-title {
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 600;
            margin-bottom: 3rem;
            text-align: center;
            letter-spacing: -0.02em;
        }

        /* Search Container in unified layout */
        .unified-container .search-container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 4rem auto;
        }

        /* Search Container */
        .search-container {
            width: 100%;
            max-width: 600px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-primary);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 10px 25px var(--shadow-heavy);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .search-container:focus-within {
            border-color: var(--accent-blue);
            box-shadow: 0 10px 25px var(--highlight-bg);
        }

        /* Search Input */
        .search-input {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 1.125rem;
            padding: 1rem 0;
            outline: none;
            resize: none;
            font-family: inherit;
            line-height: 1.5;
            min-height: 120px;
            max-height: 400px;
            overflow-y: auto;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        /* Custom scrollbar for textarea */
        .search-input::-webkit-scrollbar {
            width: 6px;
        }

        .search-input::-webkit-scrollbar-track {
            background: transparent;
        }

        .search-input::-webkit-scrollbar-thumb {
            background: var(--border-secondary);
            border-radius: 3px;
        }

        .search-input::-webkit-scrollbar-thumb:hover {
            background: var(--text-disabled);
        }

        /* Button Row */
        .button-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            gap: 1rem;
        }

        .exact-btn {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: 2px solid var(--border-secondary);
            border-radius: 0.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .exact-btn:hover {
            border-color: var(--accent-blue);
            background: var(--accent-blue-hover);
            color: var(--text-primary);
        }

        .exact-btn.active {
            border-color: var(--accent-blue);
            background: var(--accent-blue);
            color: var(--text-primary);
        }

        .submit-btn {
            padding: 0.75rem 1.5rem;
            background: var(--accent-green);
            border: none;
            border-radius: 0.5rem;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .submit-btn:hover {
            background: var(--accent-green-hover);
            transform: translateY(-1px);
        }

        .submit-btn:disabled {
            background: var(--text-disabled);
            cursor: not-allowed;
            transform: none;
        }

        /* Loading state */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Focus indicators for accessibility */
        .exact-btn:focus,
        .submit-btn:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }

        /* Live Search in Header */
        .live-search-container {
            position: relative;
            width: 320px;
        }

        .live-search-input {
            width: 100%;
            background: #ffffff;
            border: 2px solid #cccccc;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: #000000;
            font-size: 0.875rem;
            outline: none;
            transition: all 0.2s;
        }

        .live-search-input:focus {
            border-color: #3b82f6;
            background: #ffffff;
        }

        .live-search-input::placeholder {
            color: #666666;
        }

        /* Live Search Dropdown */
        .live-search-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #ffffff;
            border: 1px solid #cccccc;
            border-top: none;
            border-radius: 0 0 0.5rem 0.5rem;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .live-search-dropdown.visible {
            display: block;
        }

        .live-search-item {
            padding: 0.75rem 1rem;
            color: #000000;
            cursor: pointer;
            border-bottom: 1px solid #eeeeee;
            transition: background 0.15s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .live-search-item:hover,
        .live-search-item.highlighted {
            background: #f5f5f5;
        }

        .live-search-item:last-child {
            border-bottom: none;
        }

        .live-search-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .live-search-text {
            flex: 1;
            min-width: 0;
        }

        .live-search-title {
            font-weight: 500;
            color: #000000;
            font-size: 0.875rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .live-search-type {
            font-size: 0.75rem;
            color: #666666;
            margin-top: 0.25rem;
        }

        .live-search-loading {
            padding: 1rem;
            text-align: center;
            color: #666666;
            font-size: 0.875rem;
        }

        .live-search-no-results {
            padding: 1rem;
            text-align: center;
            color: #999999;
            font-size: 0.875rem;
        }


        .theme-preview {
            width: 24px;
            height: 16px;
            border-radius: 4px;
            display: flex;
            overflow: hidden;
            flex-shrink: 0;
        }

        .theme-preview-section {
            flex: 1;
            height: 100%;
        }

        .theme-preview.steel .theme-preview-section:first-child { background: #1a1a1a; }
        .theme-preview.steel .theme-preview-section:nth-child(2) { background: #2a2a2a; }
        .theme-preview.steel .theme-preview-section:last-child { background: #3b82f6; }

        .theme-preview.terracotta .theme-preview-section:first-child { background: #0D0D0D; }
        .theme-preview.terracotta .theme-preview-section:nth-child(2) { background: #262626; }
        .theme-preview.terracotta .theme-preview-section:last-child { background: #737373; }

        .theme-preview.vasilev .theme-preview-section:first-child { background: #0a2140; }
        .theme-preview.vasilev .theme-preview-section:nth-child(2) { background: #80a78f; }
        .theme-preview.vasilev .theme-preview-section:last-child { background: #255459; }

        .theme-preview.soliyev .theme-preview-section:first-child { background: #101726; }
        .theme-preview.soliyev .theme-preview-section:nth-child(2) { background: #1E2940; }
        .theme-preview.soliyev .theme-preview-section:last-child { background: #737373; }

        .theme-preview.professional .theme-preview-section:first-child { background: #0f172a; }
        .theme-preview.professional .theme-preview-section:nth-child(2) { background: #1e293b; }
        .theme-preview.professional .theme-preview-section:last-child { background: #0ea5e9; }

        .theme-name {
            color: var(--text-primary);
            font-weight: 500;
            font-size: 0.875rem;
        }

        /* Results Counter in unified layout */
        .unified-container .results-counter {
            color: var(--text-muted);
            font-size: 0.875rem;
            font-weight: 500;
            text-align: center;
            margin-bottom: 2rem;
        }

        .density-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .density-btn {
            background: transparent;
            border: 1px solid var(--border-secondary);
            border-radius: 0.25rem;
            padding: 0.25rem 0.75rem;
            color: var(--text-secondary);
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .density-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--accent-blue);
        }

        .density-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .density-divider {
            color: var(--text-disabled);
            font-size: 0.75rem;
        }

        /* Unified Results Grid */
        .unified-container .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 2rem;
            width: 100%;
        }

        /* Document Cards */
        .document-card {
            background: #2a2a2a;
            background-image: linear-gradient(135deg, 
                rgba(255,255,255,0.06) 0%,
                rgba(255,255,255,0.03) 50%, 
                rgba(0,0,0,0.03) 100%);
            border: 1px solid #374151;
            border-radius: 0.5rem 0 0 0.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: stretch;
            min-height: 140px;
        }

        .document-card:hover {
            border-color: #3b82f6;
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            background: #374151;
        }

        /* Horizontal Split Layout - Text Left, Preview Right */
        .document-content-area {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: row;
            align-items: stretch;
        }

        /* Text Section - Left 60% */
        .document-text-section {
            flex: 0 0 60%;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        /* Preview Section - Right 40% */
        .document-preview-section {
            flex: 0 0 40%;
            position: relative;
            overflow: hidden;
        }

        .document-preview-img {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: top right;
            border-radius: 0;
        }

        /* Typography - Size Responsive */
        .document-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            line-height: 1.3;
            word-wrap: break-word;
            max-width: 95%;
        }

        /* Size-specific typography classes */
        .card-tiny .document-title {
            font-size: 1.40625rem;
            line-height: 1.2;
        }

        .card-small .document-title {
            font-size: 1.0625rem;
            line-height: 1.3;
        }

        .card-medium .document-title {
            font-size: 1rem;
            line-height: 1.4;
        }

        .card-large .document-title {
            font-size: 1.2rem;
            line-height: 1.4;
        }

        .card-huge .document-title {
            font-size: 1.4rem;
            line-height: 1.5;
        }


        /* Compact View Modal */
        .compact-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .compact-modal.visible {
            display: flex;
        }

        .compact-window {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 1rem;
            width: 90%;
            max-width: 1000px;
            height: 80%;
            max-height: 600px;
            box-shadow: 0 25px 50px var(--shadow-heavy);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .compact-header {
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-primary);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .compact-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }

        .compact-info {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-left: auto;
        }

        .compact-close {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.25rem;
            font-size: 1.2rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
        }

        .compact-close:hover {
            background: var(--bg-quaternary);
            color: var(--text-primary);
        }

        .compact-content {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        .compact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 0.75rem;
        }

        /* Compact Cards - Dense Layout */
        .compact-card {
            background: var(--bg-primary);
            border: 1px solid var(--border-primary);
            border-radius: 0.5rem;
            padding: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-height: 60px;
        }

        .compact-card:hover {
            border-color: var(--accent-blue);
            background: var(--bg-tertiary);
            transform: translateY(-1px);
        }

        .compact-icon {
            width: 32px;
            height: 32px;
            background: var(--accent-red);
            border-radius: 0.375rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: white;
            flex-shrink: 0;
        }

        .compact-text {
            flex: 1;
            min-width: 0;
        }

        .compact-card-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .compact-card-type {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .compact-preview {
            width: 40px;
            height: 48px;
            background: var(--bg-tertiary);
            border-radius: 0.25rem;
            overflow: hidden;
            flex-shrink: 0;
            border: 1px solid var(--border-secondary);
        }

        .compact-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: top;
        }

        /* Compact scrollbar */
        .compact-content::-webkit-scrollbar {
            width: 8px;
        }

        .compact-content::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
        }

        .compact-content::-webkit-scrollbar-thumb {
            background: var(--border-secondary);
            border-radius: 4px;
        }

        .compact-content::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* Footer - Pinned to bottom like header is pinned to top */
        /* COMMENTED OUT - Terms and Conditions on pause
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-primary);
            z-index: 100;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .terms-link {
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 0.7rem;
            cursor: pointer;
            padding: 0.4rem 0.8rem;
            transition: all 0.3s ease;
            font-family: inherit;
            text-decoration: none;
            border-radius: 0.25rem;
        }

        .terms-link:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }
        */

        /* Footer Terms Modal - Slides up from bottom */
        /* COMMENTED OUT - Terms and Conditions on pause
        .footer-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            z-index: 1001;
            transform: translateY(100vh);
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.5);
        }

        .footer-modal.visible {
            transform: translateY(0);
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .footer-header {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 2rem;
        }

        .footer-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 0.25rem;
            transition: all 0.2s;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-close:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }

        .footer-text {
            flex: 1;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .footer-text h3 {
            color: var(--text-primary);
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
        }

        .footer-text h4 {
            color: var(--text-primary);
            font-size: 1.1rem;
            margin: 2rem 0 1rem 0;
            font-weight: 500;
        }

        .footer-text p {
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        .footer-links {
            margin: 2rem 0;
            text-align: center;
            font-size: 0.875rem;
        }

        .footer-links a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--text-primary);
        }

        .footer-copyright {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-primary);
        }

        .footer-copyright p {
            color: var(--text-disabled);
            font-size: 0.875rem;
            margin: 0;
        }
        */

        /* Highlight animation for live search selection */
        @keyframes highlight-flash {
            0% { background: var(--bg-secondary); }
            25% { background: var(--accent-blue); }
            50% { background: var(--accent-blue-hover); }
            75% { background: var(--accent-blue); }
            100% { background: var(--bg-secondary); }
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }

            .header-left {
                gap: 1rem;
            }

            .header-controls {
                gap: 0.5rem;
            }

            .header-btn {
                padding: 0.2rem 0.6rem;
                font-size: 0.7rem;
            }

            .header h1 {
                font-size: 1rem;
            }

            .header-dropdown {
                min-width: 260px;
                left: 0;
            }

            .search-dropdown {
                min-width: 280px;
            }

            .settings-dropdown {
                min-width: 280px;
            }

            .unified-container {
                padding: 1rem;
                padding-top: calc(32px + 1rem);
                padding-bottom: 1rem;
            }

            .manifest-title {
                margin-bottom: 2rem;
            }

            .unified-container .search-container {
                margin-bottom: 2rem;
            }

            .search-container {
                padding: 1.25rem;
            }

            .search-input {
                font-size: 1rem;
                min-height: 50px;
            }

            .button-row {
                flex-direction: column;
                gap: 0.75rem;
            }

            .exact-btn,
            .submit-btn {
                width: 100%;
                justify-content: center;
            }

            .unified-container .results-counter {
                font-size: 0.75rem;
                text-align: center;
            }

            .unified-container .results-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }


            .document-card {
                flex-direction: row;
                min-height: 80px;
                width: 99%;
                margin: 0 auto;
            }

            .document-content-area {
                padding: 1rem;
                gap: 0.5rem;
            }

            .document-title {
                font-size: 1rem;
                line-height: 1.3;
                margin-bottom: 0.5rem;
            }

            .compact-modal {
                padding: 1rem;
            }

            .compact-window {
                width: 100%;
                height: 90%;
            }

            .compact-grid {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .compact-card {
                min-height: 50px;
                padding: 0.5rem;
            }

            /* COMMENTED OUT - Footer styles
            .footer {
                height: 35px;
            }

            .terms-link {
                font-size: 0.65rem;
                padding: 0.3rem 0.6rem;
            }
            */

            /* COMMENTED OUT - Footer content styles
            .footer-content {
                padding: 1.5rem 1rem;
            }
            */

            /* COMMENTED OUT - Footer text styles
            .footer-text h3 {
                font-size: 1.25rem;
            }

            .footer-close {
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
            }
            */
        }

        /* Extra small phones */
        @media (max-width: 480px) {
            .unified-container {
                padding: 0.75rem;
                padding-top: calc(32px + 0.75rem);
                padding-bottom: 0.75rem;
            }

            .search-container {
                padding: 1rem;
            }

            .manifest-title {
                margin-bottom: 1.5rem;
            }

            .live-search-container {
                width: 150px;
            }

            .live-search-input {
                font-size: 0.8rem;
                padding: 0.5rem 0.75rem;
            }


            /* COMMENTED OUT - Footer styles
            .footer {
                height: 35px;
            }

            .terms-link {
                font-size: 0.6rem;
                padding: 0.25rem 0.5rem;
            }
            */

            /* COMMENTED OUT - Footer content styles
            .footer-content {
                padding: 1rem 0.75rem;
            }
            */
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <h1><a href="#" style="color: inherit; text-decoration: none; cursor: pointer;" onclick="scrollToTop()">filemanifest.io</a></h1>
        </div>

        <div class="header-center">
            <!-- Search, Settings, Support moved to center-left -->
            <div class="header-dropdown-container">
                <button class="header-btn">Search</button>
                <div class="header-dropdown search-dropdown">
                    <div class="live-search-container">
                        <input 
                            type="text" 
                            id="liveSearchInput" 
                            class="live-search-input" 
                            placeholder="Title Search"
                            autocomplete="off"
                        >
                        <div id="liveSearchDropdown" class="live-search-dropdown">
                            <!-- Dynamic results will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="header-dropdown-container">
                <button class="header-btn">Settings</button>
                <div class="header-dropdown settings-dropdown">
                    <!-- Themes Section -->
                    <div class="dropdown-section">
                        <div class="dropdown-section-title">Theme</div>
                        <div class="theme-grid">
                            <div class="theme-option active" data-theme="vasilev">
                                <div class="theme-preview vasilev">
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                </div>
                                <span class="theme-name">Vasilev</span>
                            </div>
                            <div class="theme-option" data-theme="professional">
                                <div class="theme-preview professional">
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                </div>
                                <span class="theme-name">Professional</span>
                            </div>
                            <div class="theme-option" data-theme="soliyev">
                                <div class="theme-preview soliyev">
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                </div>
                                <span class="theme-name">Soliyev</span>
                            </div>
                            <div class="theme-option" data-theme="steel">
                                <div class="theme-preview steel">
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                </div>
                                <span class="theme-name">Steel</span>
                            </div>
                            <div class="theme-option" data-theme="terracotta">
                                <div class="theme-preview terracotta">
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                    <div class="theme-preview-section"></div>
                                </div>
                                <span class="theme-name">Early 4x5</span>
                            </div>
                        </div>
                    </div>

                    <!-- Card Size Section -->
                    <div class="dropdown-section">
                        <div class="dropdown-section-title">Card Size</div>
                        <div class="density-controls">
                            <button id="lessBtn" class="density-btn">Less</button>
                            <span class="density-divider">|</span>
                            <button id="moreBtn" class="density-btn">More</button>
                        </div>
                    </div>

                    <!-- Views Section -->
                    <div class="dropdown-section">
                        <div class="dropdown-section-title">Views</div>
                        <button id="compactViewBtn" class="settings-action-btn">Compact View</button>
                    </div>
                </div>
            </div>

            <div class="header-dropdown-container">
                <button class="header-btn">Support</button>
                <div class="header-dropdown support-dropdown">
                    <div class="dropdown-section">
                        <button class="settings-action-btn">Documentation</button>
                        <button class="settings-action-btn">Contact Support</button>
                        <button class="settings-action-btn">Report Issue</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="header-controls">
            <!-- Sign Out Button (No Dropdown) -->
            <button class="header-btn signout-btn">Sign Out</button>
        </div>
    </header>

    <!-- Unified Content Area -->
    <div class="unified-container">
        <!-- Main Title -->
        <h1 class="manifest-title">Manifest</h1>
        
        <!-- Main Search Container -->
        <div class="search-container">
            <textarea 
                id="searchInput"
                class="search-input" 
                placeholder="AI Semantic Search"
                rows="1"
            ></textarea>
            
            <div class="button-row">
                <button id="exactBtn" class="exact-btn">
                    Exact Match
                </button>
                
                <button id="submitBtn" class="submit-btn">
                    <span id="submitIcon">üîç</span>
                    <span id="submitText">Search</span>
                </button>
            </div>
        </div>

        <!-- Results Counter -->
        <div class="results-counter" id="resultsCounter">
            100 documents
        </div>

        <!-- Unified Results Grid -->
        <div class="results-grid" id="resultsGrid">
            <!-- Cards will be dynamically generated -->
        </div>
    </div>

    <!-- COMMENTED OUT - Terms and Conditions on pause
    <!-- Footer Terms Modal -->
    <div class="footer-modal" id="footerModal">
        <div class="footer-content">
            <div class="footer-header">
                <button class="footer-close" id="footerCloseBtn">√ó</button>
            </div>
            <div class="footer-text">
                <h3>Terms and Conditions</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                
                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                
                <h4>Privacy Policy</h4>
                <p>Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt.</p>
                
                <h4>Acceptable Use</h4>
                <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem.</p>
                
                <p>Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur.</p>
                
                <div class="footer-links">
                    <a href="#">Privacy Policy</a> ‚Ä¢ 
                    <a href="#">Terms of Use</a> ‚Ä¢ 
                    <a href="#">Contact</a> ‚Ä¢ 
                    <a href="#">Support</a>
                </div>
                
                <div class="footer-copyright">
                    <p>¬© 2024 Manifest. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>
    -->

    <!-- Compact View Modal -->
    <div class="compact-modal" id="compactModal">
        <div class="compact-window">
            <div class="compact-header">
                <h3 class="compact-title">Compact View</h3>
                <span class="compact-info" id="compactInfo">28 documents</span>
                <button class="compact-close" id="compactCloseBtn" title="Close compact view">√ó</button>
            </div>
            <div class="compact-content">
                <div class="compact-grid" id="compactGrid">
                    <!-- Compact cards will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // State
        let isExactMode = false;
        let isLoading = false;
        let currentTheme = 'vasilev';
        let highlightedIndex = -1;

        // Card Size Control State
        let currentSizeIndex = 2; // Start at medium (index 2)
        const cardSizes = [
            { name: 'Tiny', minWidth: '280px' },    // 4-5 cards per row
            { name: 'Small', minWidth: '350px' },   // 3-4 cards per row  
            { name: 'Medium', minWidth: '450px' },  // 2-3 cards per row (current)
            { name: 'Large', minWidth: '600px' },   // 1-2 cards per row
            { name: 'Huge', minWidth: '800px' }     // 1 card per row
        ];

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const exactBtn = document.getElementById('exactBtn');
        const submitBtn = document.getElementById('submitBtn');
        const submitIcon = document.getElementById('submitIcon');
        const submitText = document.getElementById('submitText');
        
        
        // Live search elements
        const liveSearchInput = document.getElementById('liveSearchInput');
        const liveSearchDropdown = document.getElementById('liveSearchDropdown');

        // Compact view elements
        const compactViewBtn = document.getElementById('compactViewBtn');
        const compactModal = document.getElementById('compactModal');
        const compactCloseBtn = document.getElementById('compactCloseBtn');
        const compactGrid = document.getElementById('compactGrid');
        const compactInfo = document.getElementById('compactInfo');
        
        // COMMENTED OUT - Terms and Footer Elements
        /*
        const termsLinkContainer = document.getElementById('termsLinkContainer');
        const termsLink = document.getElementById('termsLink');
        const footerModal = document.getElementById('footerModal');
        const footerCloseBtn = document.getElementById('footerCloseBtn');
        */
        
        // Density Control Elements
        const lessBtn = document.getElementById('lessBtn');
        const moreBtn = document.getElementById('moreBtn');

        // Generate 100 dummy documents
        function generateDocuments() {
            const titles = [
                "Introduction to Philosophy", "1984", "Sample Invoice", "Annual Budget Report 2024",
                "Team Performance Metrics", "Security Audit Report", "Product Launch Strategy",
                "Customer Satisfaction Survey", "Vendor Compliance Documentation", "Quarterly Financial Review",
                "Employee Onboarding Guide", "Technical Specification v2.0", "Marketing Campaign Analysis",
                "Risk Management Framework", "Operational Procedures Manual", "Financial Statements Q3",
                "Data Privacy Policy", "Software Architecture Guide", "Brand Guidelines 2024",
                "Performance Review Template", "Network Security Protocol", "User Experience Research",
                "Project Management Handbook", "Code Review Standards", "Emergency Response Plan",
                "Training Curriculum Design", "Quality Assurance Manual", "Business Process Documentation",
                "IT Infrastructure Report", "Customer Journey Mapping", "Competitive Analysis Study",
                "Regulatory Compliance Guide", "Investment Portfolio Review", "Sales Training Materials",
                "Product Requirements Document", "System Administration Guide", "Crisis Communication Plan",
                "Market Research Findings", "Internal Audit Report", "Strategic Planning Session",
                "Content Strategy Framework", "API Documentation v3.1", "Change Management Process",
                "Database Schema Design", "User Interface Mockups", "Budget Allocation Spreadsheet",
                "Vendor Agreement Template", "Performance Optimization Guide", "Legal Contract Review",
                "Technical Debt Assessment", "Customer Feedback Analysis", "Project Timeline Overview"
            ];
            
            const types = [
                "Academic Paper", "Classic Literature", "Business Document", "Financial Analysis",
                "HR Analytics", "Compliance Document", "Strategic Planning", "Market Research",
                "Legal Document", "Executive Summary", "Training Manual", "Engineering Document",
                "Performance Report", "Policy Document", "Operations Guide", "Technical Specification",
                "Design Guide", "Process Documentation", "Research Report", "Implementation Plan"
            ];
            
            const documents = [];
            
            for (let i = 1; i <= 100; i++) {
                const titleIndex = (i - 1) % titles.length;
                const typeIndex = Math.floor(Math.random() * types.length);
                const seed = `doc${i}`;
                
                documents.push({
                    id: i,
                    title: i > titles.length ? `${titles[titleIndex]} (${Math.floor(i / titles.length) + 1})` : titles[titleIndex],
                    type: types[typeIndex],
                    imageUrl: `https://picsum.photos/seed/${seed}/400/600`
                });
            }
            
            return documents;
        }

        const documents = generateDocuments();

        // Auto-resize textarea
        function autoResize() {
            searchInput.style.height = 'auto';
            searchInput.style.height = searchInput.scrollHeight + 'px';
        }

        // Update UI based on state
        function updateUI() {
            exactBtn.classList.toggle('active', isExactMode);
            searchInput.placeholder = isExactMode ? 'Exact Text Search' : 'AI Semantic Search';
            
            const isEmpty = !searchInput.value.trim();
            submitBtn.disabled = isEmpty || isLoading;
            
            if (isLoading) {
                submitIcon.innerHTML = '<span class="loading"></span>';
                submitText.textContent = 'Searching...';
            } else {
                submitIcon.textContent = 'üîç';
                submitText.textContent = 'Search';
            }
        }

        // Handle search submission
        function handleSearch() {
            const query = searchInput.value.trim();
            if (!query || isLoading) return;

            console.log('Search submitted:', {
                query: query,
                mode: isExactMode ? 'exact' : 'semantic'
            });

            // Start loading state
            isLoading = true;
            updateUI();

            // Update results counter
            const resultsCounter = document.getElementById('resultsCounter');
            resultsCounter.textContent = 'Searching...';

            // Simulate search and render results
            setTimeout(() => {
                resultsCounter.textContent = `${documents.length} documents`;
                renderDocuments();
                isLoading = false;
                updateUI();
                console.log('Search completed for:', query);
            }, 800);
        }

        // Theme switching functionality
        function switchTheme(theme) {
            currentTheme = theme;
            document.body.setAttribute('data-theme', theme);
            
            // Update active state in settings dropdown
            document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
            const themeOption = document.querySelector(`[data-theme="${theme}"]`);
            if (themeOption) {
                themeOption.classList.add('active');
            }
            
            // Save theme preference
            localStorage.setItem('preferred-theme', theme);
        }

        // Live search functionality
        function performLiveSearch(query) {
            if (!query.trim()) {
                liveSearchDropdown.classList.remove('visible');
                return;
            }

            // Simulate search with mock data
            const results = documents.filter(doc => 
                doc.title.toLowerCase().includes(query.toLowerCase()) ||
                doc.type.toLowerCase().includes(query.toLowerCase())
            );

            if (results.length === 0) {
                liveSearchDropdown.innerHTML = `
                    <div class="live-search-no-results">
                        No documents found for "${query}"
                    </div>
                `;
            } else {
                liveSearchDropdown.innerHTML = results.map((doc, index) => `
                    <div class="live-search-item ${index === highlightedIndex ? 'highlighted' : ''}" 
                         data-index="${index}" 
                         onclick="selectLiveSearchResult(${doc.id})">
                        <div class="live-search-icon">üìÑ</div>
                        <div class="live-search-text">
                            <div class="live-search-title">${highlightText(doc.title, query)}</div>
                            <div class="live-search-type">${highlightText(doc.type, query)}</div>
                        </div>
                    </div>
                `).join('');
            }

            liveSearchDropdown.classList.add('visible');
        }

        function highlightText(text, query) {
            if (!query) return text;
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<mark>$1</mark>');
        }

        function selectLiveSearchResult(docId) {
            const doc = documents.find(d => d.id === docId);
            if (doc) {
                liveSearchInput.value = doc.title;
                liveSearchDropdown.classList.remove('visible');
                
                // Check if cards are already rendered
                const cardElement = document.querySelector(`[data-doc-id="${docId}"]`);
                if (cardElement) {
                    // Scroll to the document if it exists
                    cardElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    cardElement.style.animation = 'highlight-flash 2s ease';
                } else {
                    // Trigger search with document title to render cards
                    searchInput.value = doc.title;
                    handleSearch();
                }
                
                console.log('Live search selected:', doc);
            }
        }

        // Create document card
        function createDocumentCard(doc) {
            const card = document.createElement('div');
            card.className = 'document-card';
            card.setAttribute('data-doc-id', doc.id);
            card.onclick = () => openDocument(doc);

            card.innerHTML = `
                <div class="document-content-area">
                    <div class="document-text-section">
                        <div class="document-title">${doc.title}</div>
                    </div>
                    <div class="document-preview-section">
                        <img src="${doc.imageUrl}" alt="${doc.title} preview" class="document-preview-img">
                    </div>
                </div>
            `;

            return card;
        }

        // Render documents
        function renderDocuments() {
            const resultsGrid = document.getElementById('resultsGrid');
            resultsGrid.innerHTML = '';
            documents.forEach(doc => {
                resultsGrid.appendChild(createDocumentCard(doc));
            });
            
            // Apply current card size after render
            applyCardSize();
        }

        // Handle document click
        function openDocument(doc) {
            console.log('Opening document:', doc);
            alert(`Opening: ${doc.title}\n\nIn real app: This would open the PDF in split-pane view or new tab`);
        }

        // Card size control functions
        function applyCardSize() {
            const currentSize = cardSizes[currentSizeIndex];
            const gridElement = document.getElementById('resultsGrid');
            
            if (!gridElement) return;
            
            // Apply the new grid template
            gridElement.style.gridTemplateColumns = `repeat(auto-fit, minmax(${currentSize.minWidth}, 1fr))`;
            
            // Apply size-specific classes to all cards
            const allCards = document.querySelectorAll('.document-card');
            allCards.forEach(card => {
                // Remove all size classes
                card.classList.remove('card-tiny', 'card-small', 'card-medium', 'card-large', 'card-huge');
                
                // Add current size class
                const sizeClass = `card-${currentSize.name.toLowerCase()}`;
                card.classList.add(sizeClass);
            });
            
            // Update results counter to show document count only
            const resultsCounter = document.getElementById('resultsCounter');
            if (resultsCounter) {
                resultsCounter.textContent = `${documents.length} documents`;
            }
        }

        function changeCardSize(direction) {
            if (direction === 'more' && currentSizeIndex < cardSizes.length - 1) {
                currentSizeIndex++;
            } else if (direction === 'less' && currentSizeIndex > 0) {
                currentSizeIndex--;
            }
            
            applyCardSize();
            updateSizeButtons();
            
            // Save preference
            localStorage.setItem('card-size-preference', currentSizeIndex);
        }

        function updateSizeButtons() {
            if (lessBtn) lessBtn.disabled = currentSizeIndex === 0;
            if (moreBtn) moreBtn.disabled = currentSizeIndex === cardSizes.length - 1;
            
            // Update button text to show current size
            if (lessBtn) lessBtn.textContent = currentSizeIndex > 0 ? `‚Üê ${cardSizes[currentSizeIndex - 1].name}` : 'Less';
            if (moreBtn) moreBtn.textContent = currentSizeIndex < cardSizes.length - 1 ? `${cardSizes[currentSizeIndex + 1].name} ‚Üí` : 'More';
        }

        // Compact View Functions
        function openCompactView() {
            renderCompactCards();
            compactModal.classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function closeCompactView() {
            compactModal.classList.remove('visible');
            document.body.style.overflow = 'auto';
        }

        function createCompactCard(doc) {
            const card = document.createElement('div');
            card.className = 'compact-card';
            card.onclick = () => {
                closeCompactView();
                openDocument(doc);
            };

            card.innerHTML = `
                <div class="compact-icon">üìÑ</div>
                <div class="compact-text">
                    <div class="compact-card-title">${doc.title}</div>
                    <div class="compact-card-type">${doc.type.split(' ‚Ä¢')[0]}</div>
                </div>
                <div class="compact-preview">
                    <img src="${doc.imageUrl}" alt="${doc.title} preview">
                </div>
            `;

            return card;
        }

        function renderCompactCards() {
            compactGrid.innerHTML = '';
            documents.forEach(doc => {
                compactGrid.appendChild(createCompactCard(doc));
            });
            compactInfo.textContent = `${documents.length} documents`;
        }

        // COMMENTED OUT - Terms and Conditions Modal Functions
        /*
        function openFooterModal() {
            footerModal.classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function closeFooterModal() {
            footerModal.classList.remove('visible');
            document.body.style.overflow = 'auto';
        }
        */

        // Initialize theme from localStorage
        function initializeTheme() {
            const savedTheme = localStorage.getItem('preferred-theme') || 'vasilev';
            switchTheme(savedTheme);
        }

        // Load size preference
        function loadSizePreference() {
            const saved = localStorage.getItem('card-size-preference');
            if (saved !== null) {
                currentSizeIndex = parseInt(saved);
            }
            updateSizeButtons();
        }

        // Scroll to top function
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }


        // Event Listeners
        searchInput.addEventListener('input', () => {
            autoResize();
            updateUI();
        });

        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSearch();
            }
        });

        exactBtn.addEventListener('click', () => {
            isExactMode = !isExactMode;
            updateUI();
        });

        submitBtn.addEventListener('click', handleSearch);

        // Theme option clicks (now in settings dropdown)
        document.querySelectorAll('.theme-option').forEach(option => {
            option.addEventListener('click', (e) => {
                e.stopPropagation();
                const theme = option.getAttribute('data-theme');
                switchTheme(theme);
            });
        });

        // Live search event listeners
        liveSearchInput.addEventListener('input', (e) => {
            const query = e.target.value;
            performLiveSearch(query);
        });

        liveSearchInput.addEventListener('keydown', (e) => {
            const items = liveSearchDropdown.querySelectorAll('.live-search-item');
            
            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    highlightedIndex = Math.min(highlightedIndex + 1, items.length - 1);
                    updateHighlight();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    highlightedIndex = Math.max(highlightedIndex - 1, -1);
                    updateHighlight();
                    break;
                case 'Enter':
                    e.preventDefault();
                    if (highlightedIndex >= 0 && items[highlightedIndex]) {
                        items[highlightedIndex].click();
                    }
                    break;
                case 'Escape':
                    liveSearchDropdown.classList.remove('visible');
                    highlightedIndex = -1;
                    break;
            }
        });

        function updateHighlight() {
            const items = liveSearchDropdown.querySelectorAll('.live-search-item');
            items.forEach((item, index) => {
                item.classList.toggle('highlighted', index === highlightedIndex);
            });
        }

        // Compact View Event Listeners
        compactViewBtn.addEventListener('click', openCompactView);
        compactCloseBtn.addEventListener('click', closeCompactView);

        // COMMENTED OUT - Footer Event Listeners
        /*
        termsLink.addEventListener('click', openFooterModal);
        footerCloseBtn.addEventListener('click', closeFooterModal);
        */

        // Card Size Control Event Listeners
        lessBtn.addEventListener('click', () => changeCardSize('less'));
        moreBtn.addEventListener('click', () => changeCardSize('more'));

        // Close dropdowns when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.header-dropdown-container')) {
                // Hide live search dropdown if click is outside search area
                if (!e.target.closest('.live-search-container')) {
                    liveSearchDropdown.classList.remove('visible');
                }
            }
        });

        // Close modals on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                if (compactModal.classList.contains('visible')) {
                    closeCompactView();
                }
                // COMMENTED OUT - Footer modal close
                /*
                else if (footerModal.classList.contains('visible')) {
                    closeFooterModal();
                }
                */
            }
        });

        // Close compact view when clicking backdrop
        compactModal.addEventListener('click', (e) => {
            if (e.target === compactModal) {
                closeCompactView();
            }
        });

        // Scroll detection for infinite scroll
        window.addEventListener('scroll', () => {
            // Infinite scroll detection
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 1000) {
                console.log('Near bottom - would load more documents');
            }
        });

        // Handle mobile viewport changes
        function handleViewportChange() {
            // Force a re-layout on mobile when keyboard appears/disappears
            if (window.innerHeight < 500) {
                document.body.style.minHeight = window.innerHeight + 'px';
            } else {
                document.body.style.minHeight = '100vh';
            }
        }

        window.addEventListener('resize', handleViewportChange);
        window.addEventListener('orientationchange', () => {
            setTimeout(handleViewportChange, 100);
        });

        // Initialize
        initializeTheme();
        loadSizePreference();
        renderDocuments(); // Show documents immediately
        searchInput.focus();
        updateUI();
    </script>
</body>
</html>